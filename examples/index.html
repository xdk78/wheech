<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>basic</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="../dist/wheech.umd.js"></script>
</head>

<body>
  <canvas id="game"></canvas>
  <script>
    // WIP THIS IS MOCK CURRENTLY
    const w = new wheech.Wheech()

    const game = w.createGame('game', { width: 800, height: 600 })
    const player = new wheech.Player('John')
    const subjectus = new wheech.InputSubject(document)
    const ctx = game.context

    const rectShape = new wheech.RectangleShape(50, 50, ctx, { fillStyle: 'palevioletred' })
    const rect = new wheech.Sprite()
    rect.setPosition({ x: 55, y: 55 })
    rect.setShape(rectShape)

    let rect2x = 5
    let rect2y = 5
    const rectShape2 = new wheech.RectangleShape(50, 50, ctx, { fillStyle: 'purple' })
    const rect2 = new wheech.Sprite()
    rect2.setPosition({ x: 0, y: 0 })
    subjectus.keydownSubject.subscribe((event) => {
      if (event == wheech.KeyCodes.ARROW_RIGHT) {
        console.log('ARROW_RIGHT')
        rect2x += 10
      }
      else if (event == wheech.KeyCodes.ARROW_LEFT) {
        console.log('ARROW_LEFT')
        rect2x -= 10
      }
      else if (event == wheech.KeyCodes.ARROW_UP) {
        console.log('ARROW_UP')
        rect2y -= 10
      }
      else if (event == wheech.KeyCodes.ARROW_DOWN) {
        console.log('ARROW_DOWN')
        rect2y += 10
      }
      rect2.setPosition({ x: rect2x, y: rect2y })

    })
    rect2.setShape(rectShape2)

    const scene = new wheech.Scene(player, 'blue', [rect, rect2])
    game.setCurrentScene(scene)
    game.run()

  </script>
</body>

</html>